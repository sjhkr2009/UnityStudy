# 7. 장식자 (구조 패턴 / Decorator, Wrapper)

"객체에 동적으로 새로움 책임을 추가할 수 있게 합니다. 기능을 추가할 때 서브클래싱보다 융통성 있는 방법을 제공합니다."

활용성
- 다른 객체에 영향을 주지 않고 동적으로 객체에 기능을 추가/제거할 수 있다.
- 여러 기능의 조합이 필요할 때 기능 단위로 클래스들을 만들어 조합할 수 있다.

구현
- Component: 사용할 객체의 인터페이스. 데코레이터도 이 인터페이스를 동일하게 상속받는다.
- ConcreteComponent: 사용할 객체. 데코레이터에 의해 기능이 추가될 수 있다.
- Decorator: Component 인터페이스를 만족하면서, Component를 입력받아 기능을 변경할 수 있다.
- ConcreteDecorator: 객체에 추가할 구체적인 기능이 구현된 클래스.

장점
- 상속에 비해 융통성 있는 설계가 가능하다.
  - 여러 기능을 동적으로 추가할 때 경우의 수 하나마다 서브클래스를 만들면 클래스 수가 지나치게 많아지는데, 이런 현상을 방지할 수 있다.
  - 서브클래스에서 수정하기 위해 상위 클래스에 지나치게 많은 기능이 들어가는 현상을 피할 수 있다.

주의할 점
- 데코레이터를 사용할 때마다 클래스의 인스턴스가 늘어나므로, 컴포넌트를 가볍게 유지하는 것이 좋다.
  - 만약 복잡한 컴포넌트라면 특정 부분만을 정의하면 되는 스트레티지 패턴을 고려할 수 있다.
- 데코레이터가 많다면 클라이언트 부분의 코드가 복잡해질 수 있다.
- 어떤 데코레이터들이 적용되었는지 타입 캐스팅으로는 알아낼 수 없다.

활용 예시
- RPG/AOS 등의 장르에서는 버프나 상태이상 등 캐릭터에세 일시적으로 영향을 주는 효과들이 있다.
- 캐릭터 스탯 구조를 수정하지 않고 각각의 책임을 맡는 데코레이터를 이용해 스탯을 조작해본다.

예제 구현
- IPlayerModel: Component에 해당하는 인터페이스.
  - 캐릭터의 능력치에 해당하는 PlayerStat과 플레이어 상태를 나타내는 BehaviorFlag로 구성되어 있다.
- BasicPlayerModel: ConcreteComponent에 해당한다. 클라이언트가 직접 사용하는 기본적인 객체.
- PlayerStatDecorator: Decorator에 해당한다. IPlayerModel에 기능을 추가하기 위한 데코레이터.
- ConcreteDecorators: PlayerStatDecorator를 상속받아 세부적인 기능을 정의하고 있는 데코레이터들.
